"0","library(textrecipes)"
"0",""
"0","# Customized function to split the strings, remove all punctuation"
"0","## squish (trim), string to lower and replace all blank spaces with _"
"0","split_category <- function(x){"
"0","  x %>% "
"0","    str_split("", "") %>% "
"0","    map(str_remove_all, ""[:punct:]"") %>%"
"0","    map(str_squish) %>% "
"0","    map(str_to_lower) %>% "
"0","    map(str_replace_all, "" "", ""_"")"
"0","  "
"0","}"
"0",""
"0","games_rec <- recipe(average ~., data = game_train) %>% "
"0","  update_role(name, new_role = ""id"") %>% "
"0","  step_tokenize(boardgamecategory, custom_token = split_category) %>% "
"0","  step_tokenfilter(boardgamecategory, max_tokens = 30) %>% "
"0","  step_tf(boardgamecategory)"
"0",""
"0","# Just to check"
"0","game_prep <- prep(games_rec)"
"0","bake(game_prep, new_data = NULL) %>%  str()"
"1","tibble [16,009 × 37]"
"1",""
"1"," (S3: "
"1",""
"1","tbl_df/tbl/data.frame"
"1",""
"1",")"
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","name                                      "
"1",""
"1",":"
"1"," Factor w/ 15781 levels ""¡Adiós Calavera!"",..: "
"1",""
"1","10857 8587 14642 858 15729 6819 13313 1490 3143 9933"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","minplayers                                "
"1",""
"1",":"
"1"," num [1:16009] "
"1",""
"1","2 2 2 4 2 1 2 2 4 2"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","maxplayers                                "
"1",""
"1",":"
"1"," num [1:16009] "
"1",""
"1","6 8 10 10 6 8 6 2 16 6"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","minplaytime                               "
"1",""
"1",":"
"1"," num [1:16009] "
"1",""
"1","120 60 30 30 60 20 60 30 60 45"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","maxplaytime                               "
"1",""
"1",":"
"1"," num [1:16009] "
"1",""
"1","120 180 30 30 90 20 60 30 60 45"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","minage                                    "
"1",""
"1",":"
"1"," num [1:16009] "
"1",""
"1","10 8 6 12 15 6 8 8 13 8"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","average                                   "
"1",""
"1",":"
"1"," num [1:16009] "
"1",""
"1","5.59 4.37 5.41 5.79 5.8 5.62 4.31 4.66 5.68 5.14"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_abstract_strategy    "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_action_dexterity     "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 1 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_adventure            "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_ancient              "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_animals              "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_bluffing             "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_card_game            "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 1 1 0 0 0 0 0 1"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_childrens_game       "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 1 1 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_deduction            "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 1 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_dice                 "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_economic             "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 1 0 0 0 0 1 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_exploration          "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 1 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_fantasy              "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_fighting             "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 1 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_horror               "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 1 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_humor                "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 1 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_medieval             "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_miniatures           "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 1 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_movies_tv_radio_theme"
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 1 0 1 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_nautical             "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 1 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_negotiation          "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 1 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_party_game           "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 1 0 1 0 0 1 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_print_play           "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_puzzle               "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 1 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_racing               "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_realtime             "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_science_fiction      "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_trivia               "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 1 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_wargame              "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","1 0 0 0 0 0 0 1 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","tf_boardgamecategory_world_war_ii         "
"1",""
"1",":"
"1"," int [1:16009] "
"1",""
"1","0 0 0 0 0 0 0 0 0 0"
"1",""
"1"," ..."
"1",""
"1","
"
